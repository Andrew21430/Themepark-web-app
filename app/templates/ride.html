{% extends 'layout.html' %}
{% block content %}
{# old cloud code new one is done with java script<div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>
    <div class="cloud"></div>

    <div class="cloud-fast"></div>
    <div class="cloud-fast"></div>
    <div class="cloud-fast"></div>
    <div class="cloud-fast"></div>
    <div class="cloud-fast"></div>
    <div class="cloud-fast"></div>
    <div class="cloud-fast"></div>
    <div class="cloud-fast"></div>
</div>
#}

<div id="cloud-container">
    <script>
        const cloudContainer = document.getElementById('cloud-container');
        
        function createCloud(topPx) {
            const cloud = document.createElement('div');
            cloud.classList.add('cloud-base');
        
            const topPercent = (topPx / window.innerHeight) * 100;
        
            // Speed tiers based on screen height position
            if (topPercent < 20) cloud.classList.add('cloud-fastest');
            else if (topPercent < 40) cloud.classList.add('cloud-fast');
            else if (topPercent < 70) cloud.classList.add('cloud-medium');
            else cloud.classList.add('cloud-slow');
        
            // Random size
            const width = 80 + Math.random() * 60;
            const height = 25 + Math.random() * 20;
            cloud.style.width = `${width}px`;
            cloud.style.height = `${height}px`;
        
            cloud.style.top = `${topPx}px`;
            cloud.style.left = `-150px`;
            cloud.style.animationDelay = `${Math.random() * 5}s`;
        
            cloudContainer.appendChild(cloud);
        }
        
        // Gradual cloud spawn across full visible screen
        let spawned = 0;
        const maxClouds = 50;
        const spawnInterval = 400;
        
        const cloudSpawner = setInterval(() => {
            if (spawned >= maxClouds) {
                clearInterval(cloudSpawner);
                return;
            }
        
            const top = Math.floor(Math.random() * window.innerHeight);
            createCloud(top);
            spawned++;
        }, spawnInterval);
        </script>
        
        
</div>
<main class="twocol-grid">
    {% for ride in rides %}
        {# Determine layout direction: 
            If index is even (0, 2, 4...), show image on the right.
            If index is odd (1, 3, 5...), show image on the left. #}
        {% set flipped = loop.index0 is even %}
            {% if flipped %}
                {# Even index (0, 2, 4...): Text on left, Image on right #}
                <article>
                    <h1>{{ride.name}} {{ride.thrill_level}}</h1> <p>{{ride.layout.description}} </p> 
                    <!-- ride.layout.description is how to query the decription column form the ride table joining layout-->
                </article>
                <article>
                    <img class = "widthhalf" src="/static/Images/website/rides/{{ride.photo}}">
                </article>
            {% else %}
                {# Odd index (1, 3, 5...): Image on left, Text on right #}
                <article>
                    <img class = "widthhalf" src="/static/Images/website/rides/{{ride.photo}}">
                </article>
                <article>
                    <h1>{{ride.name}} {{ride.thrill_level}}</h1> <p>{{ride.layout.description }}</p>
                </article>
            {% endif %}

        {% endfor %}

    {# <script>
        // Scroll to bottom on page load
        window.onload = function() {
          window.scrollTo(0, document.body.scrollHeight);
        };
    </script> #}


    <div id="bottom-content">
    </div>
    
    <script>
        window.onload = function() {
        document.getElementById('bottom-content').scrollIntoView({ behavior: 'smooth' });
        };
    </script>

    {# style code just for this page to have a nice gradient to show tyhe increase in height as you scroll up#}
    <style>
            body {
            scroll-behavior: smooth;
            background: linear-gradient(to bottom, #E0F7FA, #B3E5FC, #4FC3F7);
            overflow-x: hidden;
        }

    </style>



</main>
{% endblock %}